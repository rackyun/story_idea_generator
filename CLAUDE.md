# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº Streamlit å’Œ CrewAI çš„ AI å°è¯´åˆ›ä½œè¾…åŠ©å·¥å…·ï¼Œæ”¯æŒçµæ„Ÿç”Ÿæˆã€ä¼åˆ’ä¹¦ç¼–å†™ã€å®Œæ•´å°è¯´åˆ›ä½œå’Œé•¿ç¯‡å°è¯´ç®¡ç†ã€‚

## æ ¸å¿ƒæ¶æ„

### 1. åº”ç”¨å…¥å£
- **app.py**: Streamlit ä¸»åº”ç”¨ï¼ŒåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒæ ‡ç­¾é¡µï¼š
  - çµæ„Ÿç”Ÿæˆå™¨ï¼ˆåŸºç¡€ç‰ˆï¼‰ï¼šéšæœºè¦ç´  + AI æ‰©å†™
  - æ™ºèƒ½å†™ä½œå›¢é˜Ÿï¼ˆCrewAI ç‰ˆï¼‰ï¼šå¤š Agent åä½œç”Ÿæˆä¼åˆ’ä¹¦å’Œå°è¯´

### 2. æ•°æ®å±‚ï¼ˆdatabase.pyï¼‰
æ ¸å¿ƒæ•°æ®åº“ç®¡ç†æ¨¡å—ï¼ŒåŒ…å«å¤šä¸ªç®¡ç†å™¨ç±»ï¼š

- **DatabaseManager**: æ•…äº‹è®°å½•çš„ CRUD æ“ä½œ
  - `create_story()`: åˆ›å»ºæ–°è®°å½•
  - `list_stories()`: åˆ†é¡µæŸ¥è¯¢ï¼Œæ”¯æŒæœç´¢å’Œç­›é€‰
  - `update_story()`: æ›´æ–°è®°å½•
  - `delete_story()`: è½¯åˆ é™¤/ç¡¬åˆ é™¤

- **ChapterManager**: ç« èŠ‚ç®¡ç†
  - `create_chapter()`: åˆ›å»ºç« èŠ‚
  - `parse_chapters_from_content()`: ä» Markdown è‡ªåŠ¨è§£æç« èŠ‚
  - `reorder_chapters()`: ç« èŠ‚é‡æ’åº

- **NovelVersionManager**: ç‰ˆæœ¬æ§åˆ¶
  - `create_version()`: åˆ›å»ºç‰ˆæœ¬å¿«ç…§
  - `compare_versions()`: ç‰ˆæœ¬å¯¹æ¯”
  - `restore_version()`: æ¢å¤åˆ°æŒ‡å®šç‰ˆæœ¬

- **NovelStatsManager**: ç»Ÿè®¡åˆ†æ
  - `calculate_novel_stats()`: è®¡ç®—å­—æ•°ã€ç« èŠ‚æ•°ç­‰ç»Ÿè®¡ä¿¡æ¯
  - `get_writing_timeline()`: ç”Ÿæˆå†™ä½œæ—¶é—´çº¿

- **OutlineManager**: å¤§çº²ç®¡ç†ï¼ˆæŒ‰æ®µå­˜å‚¨ï¼‰
  - `create_outline_segment()`: åˆ›å»ºå¤§çº²æ®µ
  - `list_outline_segments()`: åˆ—å‡ºæ‰€æœ‰å¤§çº²æ®µ
  - `get_segments_by_chapter_range()`: æŒ‰ç« èŠ‚èŒƒå›´æŸ¥è¯¢

### 3. æœåŠ¡å±‚ï¼ˆservices/ï¼‰
ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘ä¸é¡µé¢å±•ç¤ºåˆ†ç¦»ï¼š

- **StoryService** (story_service.py): å†å²è®°å½•ä¸šåŠ¡æœåŠ¡
  - å¤„ç†çµæ„Ÿç”Ÿæˆã€ä¼åˆ’ä¹¦å’Œå†å²è®°å½•çš„ä¸šåŠ¡é€»è¾‘
  - æä¾›åˆ—è¡¨æŸ¥è¯¢ã€è¯¦æƒ…è·å–ã€æ›´æ–°ã€åˆ é™¤ç­‰åŠŸèƒ½
  - æ”¯æŒæ‰¹é‡æ“ä½œå’Œç»Ÿè®¡åˆ†æ

- **NovelService** (novel_service.py): å°è¯´ç®¡ç†ä¸šåŠ¡æœåŠ¡
  - å°è¯´ã€ç« èŠ‚ã€å¤§çº²çš„ CRUD æ“ä½œ
  - ç‰ˆæœ¬æ§åˆ¶å’Œå¿«ç…§ç®¡ç†
  - ç»Ÿè®¡åˆ†æå’Œæ•°æ®å¯è§†åŒ–
  - å¤šæ ¼å¼å¯¼å‡ºåŠŸèƒ½

- **ChapterService** (chapter_service.py): ç« èŠ‚ç¼–è¾‘ä¸šåŠ¡æœåŠ¡
  - ç« èŠ‚å†…å®¹ç¼–è¾‘å’Œæ›´æ–°
  - ç›¸é‚»ç« èŠ‚å¯¼èˆª
  - å­—æ•°æ ¼å¼åŒ–

- **WritingService** (writing_service.py): AI å†™ä½œä¸šåŠ¡æœåŠ¡
  - å®Œæ•´å°è¯´ç”Ÿæˆ
  - æ™ºèƒ½ç« èŠ‚ç»­å†™
  - å¤§çº²æ™ºèƒ½æ‰©å……
  - CrewAI åä½œæµç¨‹å°è£…

è¯¦ç»†ä½¿ç”¨æ–¹æ³•å‚è§ [REFACTORING_GUIDE.md](REFACTORING_GUIDE.md)

### 4. ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆlogic.pyï¼‰
- **Randomizer**: éšæœºè¦ç´ ç”Ÿæˆå™¨ï¼ˆé¢˜æã€ä¸»è§’ã€åœºæ™¯ç­‰ï¼‰
- **StoryLLM**: OpenAI API å°è£…ï¼Œç”Ÿæˆæ•…äº‹è®¾å®šå’Œæ¢—æ¦‚
- **HistoryManager**: å†å²è®°å½•ç®¡ç†ï¼Œé›†æˆ DatabaseManager

### 5. CrewAI æ™ºèƒ½ä½“ç³»ç»Ÿ
- **crew_agents.py**: å®šä¹‰å¤šä¸ªä¸“ä¸š AI Agent
  - chief_editor: æ€»ç¼–ä»£ç†
  - idea_stormer: è„‘æ´ä»£ç†
  - plot_weaver: å‰§æƒ…ä»£ç†
  - character_builder: è§’è‰²ä»£ç†
  - scene_painter: åœºæ™¯ä»£ç†
  - story_writer: æ ¸å¿ƒå†™æ‰‹
  - consistency_checker: ç¼–è¾‘ä»£ç†

- **crew_tasks.py**: å®šä¹‰åä½œä»»åŠ¡æµ
  - brainstorm_task: å¤šè½®è„‘æš´
  - plot_development_task: å‰§æƒ…å¤§çº²
  - character_design_task: è§’è‰²è®¾è®¡
  - full_story_writing_task: æ­£æ–‡æ’°å†™
  - copy_editing_task: ç¼–è¾‘æ¶¦è‰²

### 6. å·¥å…·æ¨¡å—ï¼ˆutils/ï¼‰
- **export.py**: å¤šæ ¼å¼å¯¼å‡ºï¼ˆMarkdown, TXT, EPUB, PDFï¼‰
- **stats.py**: å­—æ•°ç»Ÿè®¡ã€é˜…è¯»æ—¶é—´è®¡ç®—ã€å›¾è¡¨æ•°æ®å‡†å¤‡ã€ç¯‡å¹…åˆ†ç±»åˆ¤æ–­
- **version_diff.py**: ç‰ˆæœ¬å·®å¼‚å¯¹æ¯”ã€HTML è§†å›¾ç”Ÿæˆ
- **novel_length_config.py**: ç»Ÿä¸€çš„å°è¯´ç¯‡å¹…åˆ†ç±»é…ç½®
  - å®šä¹‰äº† 5 ä¸ªæ ‡å‡†ç¯‡å¹…åˆ†ç±»ï¼šå¾®å‹å°è¯´ï¼ˆ1ä¸‡å­—ä»¥å†…ï¼‰ã€çŸ­ç¯‡å°è¯´ï¼ˆ1-10ä¸‡å­—ï¼‰ã€ä¸­ç¯‡å°è¯´ï¼ˆ10-50ä¸‡å­—ï¼‰ã€é•¿ç¯‡å°è¯´ï¼ˆ50-200ä¸‡å­—ï¼‰ã€è¶…é•¿ç¯‡å°è¯´ï¼ˆ200ä¸‡å­—ä»¥ä¸Šï¼‰
  - æä¾›åˆ†ç±»åˆ¤æ–­ã€ç« èŠ‚è§„åˆ’æŒ‡å—ç­‰å·¥å…·å‡½æ•°
  - æ‰€æœ‰æ¶‰åŠç¯‡å¹…åˆ†ç±»çš„åœ°æ–¹éƒ½åº”ä½¿ç”¨æ­¤æ¨¡å—ï¼Œç¡®ä¿æ ‡å‡†ç»Ÿä¸€

### 7. é¡µé¢æ¨¡å—ï¼ˆpages/ï¼‰
é¡µé¢å±‚åªè´Ÿè´£ UI æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’ï¼Œä¸šåŠ¡é€»è¾‘ç”± Service å±‚å¤„ç†ï¼š

- **1_ğŸ“š_å†å²ç®¡ç†.py**: æœç´¢ã€ç­›é€‰ã€æ‰¹é‡æ“ä½œ
- **2_ğŸ“–_å†å²è¯¦æƒ….py**: å•æ¡è®°å½•è¯¦æƒ…æŸ¥çœ‹å’Œç¼–è¾‘
- **3_ğŸ“š_å°è¯´ç®¡ç†.py**: ç« èŠ‚ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶ã€ç»Ÿè®¡åˆ†æã€å¯¼å‡º
- **4_âœï¸_ç« èŠ‚ç¼–è¾‘.py**: ç« èŠ‚å†…å®¹ç¼–è¾‘
  - **4_âœï¸_ç« èŠ‚ç¼–è¾‘_refactored.py**: é‡æ„ç‰ˆç¤ºä¾‹ï¼ˆä½¿ç”¨ ChapterServiceï¼‰
- **5_ğŸ”„_ç‰ˆæœ¬å¯¹æ¯”.py**: ç‰ˆæœ¬å·®å¼‚å¯¹æ¯”è§†å›¾

**é‡æ„æŒ‡å—**: å‚è§ [REFACTORING_GUIDE.md](REFACTORING_GUIDE.md) äº†è§£å¦‚ä½•ä½¿ç”¨ Service å±‚é‡æ„é¡µé¢

## å¸¸ç”¨å‘½ä»¤

### å¯åŠ¨åº”ç”¨
```bash
streamlit run app.py
```

### æ•°æ®åº“è¿ç§»
```bash
# ä» JSON è¿ç§»åˆ°æ•°æ®åº“
python migrations/migrate_json_to_db.py

# æ‹†åˆ† novels è¡¨
python migrations/migrate_split_novels.py

# æ·»åŠ å¤§çº²å­—æ®µ
python migrations/migrate_add_outlines.py

# è¿ç§»å¤§çº²åˆ°åˆ†æ®µå­˜å‚¨
python migrations/migrate_outline_to_segments.py
```

### åˆå§‹åŒ–æ–°è¡¨
```bash
# åˆå§‹åŒ– outline_segments è¡¨
python init_new_tables.py
```

## é…ç½®æ–‡ä»¶

### config.yaml
```yaml
llm:
  base_url: "https://api.example.com/v1"
  api_key: "your-api-key"
  model: "model-name"
```

**æ³¨æ„**: config.yaml åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œå·²åœ¨ .gitignore ä¸­æ’é™¤ã€‚

## æ•°æ®åº“ç»“æ„

### æ•°æ®åº“æ–‡ä»¶

**é‡è¦**: é¡¹ç›®ä½¿ç”¨å•ä¸€æ•°æ®åº“æ–‡ä»¶ `stories.db`ï¼Œæ‰€æœ‰æ•°æ®è¡¨éƒ½åœ¨è¿™ä¸ªæ•°æ®åº“ä¸­ã€‚

**ç¦æ­¢æ‹†åˆ†æ•°æ®åº“**ï¼š
- âŒ ä¸è¦åˆ›å»ºå¤šä¸ªæ•°æ®åº“æ–‡ä»¶ï¼ˆå¦‚ story_data.db, dice_options.db ç­‰ï¼‰
- âŒ ä¸è¦å°†ä¸åŒåŠŸèƒ½çš„è¡¨æ‹†åˆ†åˆ°ä¸åŒçš„æ•°æ®åº“
- âœ… æ‰€æœ‰è¡¨å¿…é¡»åœ¨ `stories.db` ä¸­ç»Ÿä¸€ç®¡ç†

**åŸå› **ï¼š
1. ç®€åŒ–æ•°æ®åº“è¿æ¥å’Œäº‹åŠ¡ç®¡ç†
2. é¿å…è·¨æ•°æ®åº“æŸ¥è¯¢çš„å¤æ‚æ€§
3. ä¾¿äºå¤‡ä»½ã€è¿ç§»å’Œéƒ¨ç½²
4. å‡å°‘é…ç½®é”™è¯¯å’Œæ•°æ®ä¸ä¸€è‡´çš„é£é™©

### æ ¸å¿ƒè¡¨
- **stories**: çµæ„Ÿå’Œä¼åˆ’ä¹¦è®°å½•
- **novels**: é•¿ç¯‡å°è¯´è®°å½•
- **chapters**: ç« èŠ‚å†…å®¹
- **novel_versions**: ç‰ˆæœ¬å¿«ç…§
- **novel_metadata**: å°è¯´å…ƒæ•°æ®
- **outline_segments**: å¤§çº²åˆ†æ®µ
- **story_relations**: è®°å½•å…³è”å…³ç³»
- **dice_options**: éª°å­é€‰é¡¹é…ç½®

### ç´¢å¼•ä¼˜åŒ–
- stories è¡¨ï¼štype, created_at, is_deleted
- chapters è¡¨ï¼šnovel_id, chapter_number
- outline_segments è¡¨ï¼šnovel_id, segment_order

## å…³é”®è®¾è®¡æ¨¡å¼

### 1. è½¯åˆ é™¤
æ‰€æœ‰è¡¨éƒ½ä½¿ç”¨ `is_deleted` å­—æ®µå®ç°è½¯åˆ é™¤ï¼Œæ”¯æŒæ•°æ®æ¢å¤ã€‚

### 2. ç‰ˆæœ¬å¿«ç…§
ä½¿ç”¨ JSON åºåˆ—åŒ–å­˜å‚¨å®Œæ•´çš„å°è¯´å’Œç« èŠ‚æ•°æ®ï¼Œæ”¯æŒç‰ˆæœ¬å¯¹æ¯”å’Œæ¢å¤ã€‚

### 3. å¤§çº²åˆ†æ®µç®¡ç†
å¤§çº²æŒ‰æ®µï¼ˆsegmentï¼‰å­˜å‚¨ï¼Œæ¯æ®µåŒ…å«ç« èŠ‚èŒƒå›´ï¼ˆstart_chapter, end_chapterï¼‰ï¼Œæ”¯æŒç‹¬ç«‹ç¼–è¾‘å’Œç”Ÿæˆã€‚

### 4. CrewAI Signal ä¿®å¤
Streamlit å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ CrewAI ä¼šè§¦å‘ signal.signal é”™è¯¯ï¼Œä½¿ç”¨ monkeypatch ä¿®å¤ï¼š
```python
import signal
_original_signal = signal.signal
def _safe_signal(sig, handler):
    try:
        return _original_signal(sig, handler)
    except ValueError as e:
        if "main thread" in str(e):
            return None
        raise e
signal.signal = _safe_signal
```

### 5. å»¶è¿Ÿå¯¼å…¥
CrewAI ç›¸å…³æ¨¡å—åœ¨éœ€è¦æ—¶æ‰å¯¼å…¥ï¼Œé¿å…å¯åŠ¨æ—¶åŠ è½½è¿‡æ…¢ã€‚

## å¼€å‘æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åº“æ“ä½œ
- **ä½¿ç”¨å•ä¸€æ•°æ®åº“**: æ‰€æœ‰æ¨¡å—å¿…é¡»ä½¿ç”¨ `stories.db`ï¼Œé»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®æ ¹ç›®å½•
- **ç»Ÿä¸€æ•°æ®åº“ç®¡ç†å™¨**: å§‹ç»ˆä½¿ç”¨ DatabaseManager åŠå…¶å­ç±»è¿›è¡Œæ•°æ®åº“æ“ä½œ
- **é¿å…ç›´æ¥ SQL**: ä½¿ç”¨å°è£…å¥½çš„æ–¹æ³•ï¼Œä¸è¦ç›´æ¥æ‰§è¡Œ SQL è¯­å¥
- **æ³¨æ„è½¯åˆ é™¤**: æŸ¥è¯¢æ—¶é»˜è®¤è¿‡æ»¤ `is_deleted=1` çš„è®°å½•
- **ç¦æ­¢æ‹†åˆ†æ•°æ®åº“**: ä¸è¦åˆ›å»ºå¤šä¸ª .db æ–‡ä»¶ï¼Œæ‰€æœ‰è¡¨éƒ½åœ¨ stories.db ä¸­

**æ•°æ®åº“åˆå§‹åŒ–ç¤ºä¾‹**ï¼š
```python
# âœ… æ­£ç¡®ï¼šä½¿ç”¨é»˜è®¤è·¯å¾„
from database import DatabaseManager
db_manager = DatabaseManager()  # é»˜è®¤ä½¿ç”¨ stories.db

# âœ… æ­£ç¡®ï¼šæ˜¾å¼æŒ‡å®šè·¯å¾„
db_manager = DatabaseManager(db_path="stories.db")

# âŒ é”™è¯¯ï¼šåˆ›å»ºæ–°çš„æ•°æ®åº“æ–‡ä»¶
db_manager = DatabaseManager(db_path="other_data.db")
```

### 2. ç« èŠ‚è§£æ
- ä½¿ç”¨ `ChapterManager.parse_chapters_from_content()` è‡ªåŠ¨è§£æç« èŠ‚
- æ”¯æŒçš„ç« èŠ‚æ ‡é¢˜æ ¼å¼ï¼š
  - `# ç¬¬Xç«  æ ‡é¢˜`
  - `## ç¬¬Xç«  æ ‡é¢˜`
  - `ç¬¬Xç«  æ ‡é¢˜`
  - `Chapter X: æ ‡é¢˜`

### 3. ç‰ˆæœ¬æ§åˆ¶
- åˆ›å»ºç‰ˆæœ¬å‰ç¡®ä¿å°è¯´å’Œç« èŠ‚æ•°æ®å®Œæ•´
- ç‰ˆæœ¬å¿«ç…§åŒ…å«å®Œæ•´çš„ novel å’Œ chapters æ•°æ®
- ç‰ˆæœ¬å¯¹æ¯”ä½¿ç”¨ difflib ç”Ÿæˆ unified diff

### 4. å¯¼å‡ºåŠŸèƒ½
- EPUB å¯¼å‡ºéœ€è¦ `ebooklib` åº“
- PDF å¯¼å‡ºéœ€è¦ `weasyprint` åº“
- å¯¼å‡ºå‰æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…

### 5. CrewAI ä½¿ç”¨
- æ‰€æœ‰ Agent å¿…é¡»è®¾ç½® `allow_delegation=False` é¿å…åç§°åŒ¹é…é—®é¢˜
- ä½¿ç”¨ `LLM` ç±»è€Œé `ChatOpenAI`ï¼ŒæŒ‡å®š `provider="openai"`
- Task ä¹‹é—´é€šè¿‡ context å‚æ•°ä¼ é€’ä¾èµ–å…³ç³»

### 6. Streamlit é¡µé¢è·³è½¬
- ä½¿ç”¨ `st.switch_page()` è¿›è¡Œé¡µé¢è·³è½¬
- é¡µé¢æ–‡ä»¶åæ ¼å¼ï¼š`æ•°å­—_emoji_åç§°.py`
- é€šè¿‡ `st.session_state` ä¼ é€’é¡µé¢é—´å‚æ•°

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆåªä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Ÿ
A: ä½¿ç”¨å•ä¸€æ•°æ®åº“æ–‡ä»¶ `stories.db` æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
- ç®€åŒ–æ•°æ®åº“è¿æ¥å’Œäº‹åŠ¡ç®¡ç†
- é¿å…è·¨æ•°æ®åº“æŸ¥è¯¢çš„å¤æ‚æ€§
- ä¾¿äºå¤‡ä»½ã€è¿ç§»å’Œéƒ¨ç½²
- å‡å°‘é…ç½®é”™è¯¯å’Œæ•°æ®ä¸ä¸€è‡´çš„é£é™©
- æ‰€æœ‰æ•°æ®åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ˜“äºç®¡ç†

**é‡è¦**: ä¸è¦åˆ›å»ºå¤šä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œæ‰€æœ‰è¡¨éƒ½åº”è¯¥åœ¨ `stories.db` ä¸­ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„æ•°æ®è¡¨ï¼Ÿ
A: åœ¨ `database.py` ä¸­çš„ç›¸åº”ç®¡ç†å™¨ç±»ä¸­æ·»åŠ è¡¨åˆå§‹åŒ–ä»£ç ï¼Œç¡®ä¿è¡¨åˆ›å»ºåœ¨ `stories.db` ä¸­ï¼š
```python
def _init_database(self):
    conn = sqlite3.connect(self.db_path)  # ä½¿ç”¨ stories.db
    cursor = conn.cursor()
    cursor.execute("""
        CREATE TABLE IF NOT EXISTS new_table (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            ...
        )
    """)
    conn.commit()
    conn.close()
```

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ AI Agentï¼Ÿ
A: åœ¨ `crew_agents.py` ä¸­å®šä¹‰æ–° Agentï¼Œåœ¨ `crew_tasks.py` ä¸­å®šä¹‰å¯¹åº” Taskï¼Œç„¶ååœ¨ `app.py` ä¸­ç»„è£… Crewã€‚

### Q: å¦‚ä½•ä¿®æ”¹æ•°æ®åº“ç»“æ„ï¼Ÿ
A: åœ¨ `migrations/` ç›®å½•åˆ›å»ºæ–°çš„è¿ç§»è„šæœ¬ï¼Œä½¿ç”¨ `ALTER TABLE` è¯­å¥ä¿®æ”¹è¡¨ç»“æ„ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„å¯¼å‡ºæ ¼å¼ï¼Ÿ
A: åœ¨ `utils/export.py` çš„ `ExportManager` ç±»ä¸­æ·»åŠ æ–°çš„å¯¼å‡ºæ–¹æ³•ã€‚

### Q: ç« èŠ‚è‡ªåŠ¨è§£æå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ç« èŠ‚æ ‡é¢˜æ ¼å¼æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ–æ‰‹åŠ¨åˆ›å»ºç« èŠ‚ã€‚

### Q: å¦‚ä½•ä¼˜åŒ–å¤§é‡è®°å½•çš„æŸ¥è¯¢æ€§èƒ½ï¼Ÿ
A: ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼Œè°ƒæ•´ `page_size` å‚æ•°ï¼›ç¡®ä¿ç´¢å¼•å·²åˆ›å»ºï¼›è€ƒè™‘æ·»åŠ ç¼“å­˜ã€‚

## ä¾èµ–åº“

### æ ¸å¿ƒä¾èµ–
- streamlit: Web åº”ç”¨æ¡†æ¶
- openai: OpenAI API å®¢æˆ·ç«¯
- crewai: å¤š Agent åä½œæ¡†æ¶
- pyyaml: é…ç½®æ–‡ä»¶è§£æ

### å¯é€‰ä¾èµ–
- ebooklib: EPUB å¯¼å‡º
- weasyprint: PDF å¯¼å‡º
- plotly: æ•°æ®å¯è§†åŒ–
- markdown: Markdown å¤„ç†

## é¡¹ç›®ç‰¹è‰²

1. **å¤š Agent åä½œ**: ä½¿ç”¨ CrewAI å®ç°ä¸“ä¸šå†™ä½œå›¢é˜Ÿåä½œ
2. **å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶**: æ”¯æŒç‰ˆæœ¬å¿«ç…§ã€å¯¹æ¯”å’Œæ¢å¤
3. **çµæ´»çš„å¤§çº²ç®¡ç†**: æŒ‰æ®µå­˜å‚¨ï¼Œæ”¯æŒç‹¬ç«‹ç¼–è¾‘å’Œç”Ÿæˆ
4. **ä¸°å¯Œçš„å¯¼å‡ºæ ¼å¼**: Markdown, TXT, EPUB, PDF
5. **ç»Ÿè®¡åˆ†æå¯è§†åŒ–**: å­—æ•°ç»Ÿè®¡ã€ç« èŠ‚åˆ†å¸ƒã€å†™ä½œæ—¶é—´çº¿
6. **è½¯åˆ é™¤æœºåˆ¶**: æ•°æ®å¯æ¢å¤ï¼Œé¿å…è¯¯åˆ 
